# 렉시컬 스코프(Lexical Scope)란?

## 1. 스코프(Scope)란?

**스코프**는 변수(식별자)의 **유효 범위**를 의미합니다. 즉, 특정 변수가 어디에서 접근할 수 있는지를 결정하는 규칙입니다.

## 2. 렉시컬 스코프(Lexical Scope)란?

**렉시컬 스코프**는 **변수가 선언된 위치(정의된 시점)** 에 따라 유효 범위가 결정되는 스코프 규칙입니다.  
이를 **정적 스코프(Static Scope)** 라고도 합니다.  
자바스크립트는 **렉시컬 스코프를 따르는 언어**입니다.

### 🔹 렉시컬 스코프 vs. 동적 스코프

|                      | 렉시컬 스코프 (Static Scope)            | 동적 스코프 (Dynamic Scope)             |
| -------------------- | --------------------------------------- | --------------------------------------- |
| **스코프 결정 시점** | **코드 작성(선언) 시점**                | **실행(호출) 시점**                     |
| **예시 언어**        | JavaScript, Python, C, Java             | Bash, Perl (일부)                       |
| **특징**             | 함수가 어디에서 **정의**되었는지가 중요 | 함수가 어디에서 **호출**되었는지가 중요 |

## 3. 실행 예제

아래 코드에서 렉시컬 스코프가 어떻게 작동하는지 확인해보겠습니다.

```js
var x = "foo";

function foo() {
  var x = "bar";
  bar();
}

function bar() {
  console.log(x);
}

foo();
bar();
```

### 1) `foo();` 실행 결과

1. `foo` 함수가 실행되면서 **지역 변수 `x`가 `"bar"`로 선언**됩니다.
2. `foo` 내부에서 `bar();`가 호출됩니다.
3. `bar` 함수 내부에서 `console.log(x);` 실행 → **전역 변수 `x`를 참조**
   - `bar` 함수 내부에는 `x` 변수가 없으므로 **외부 스코프(전역)** 에서 찾음
   - 전역 변수 `x = "foo"`
4. 따라서, **"foo"가 출력됨**

### 2) `bar();` 실행 결과

1. `bar` 함수가 호출됨
2. `bar` 내부에는 `x` 변수가 없으므로 **외부(전역)에서 `x`를 찾음**
3. 전역 변수 `x = "foo"`
4. 따라서, **"foo"가 출력됨**

#### ✅ 최종 실행 결과

```
foo
foo
```

## 4. 왜 이런 결과가 나올까? (렉시컬 스코프 적용)

- `bar` 함수가 실행될 때 **호출 위치**가 아니라, **선언된 위치 기준으로 스코프가 결정**됩니다.
- `bar` 함수가 `foo` 내부에서 호출되었어도, `bar`의 유효 범위는 **선언된 시점(전역 스코프) 기준**으로 결정됩니다.
- 따라서 `bar` 내부에서 `x`를 찾을 때 **전역 변수 `x = "foo"`를 참조**하게 됩니다.

## 5. 만약 자바스크립트가 동적 스코프였다면?

자바스크립트가 **동적 스코프**를 따르는 언어였다면, 실행 결과는 달라졌을 것입니다.

- `bar();`가 `foo` 내부에서 실행될 때, **호출된 시점**의 `x` 값을 찾게 됨
- `foo` 내부에서 `x = "bar"`이므로, **"bar"가 출력됨**

```
bar
foo
```

하지만 **자바스크립트는 렉시컬 스코프를 따르므로** 호출 위치가 아니라 **선언 위치 기준**으로 스코프가 결정됩니다.

## 🔥 정리

✔ **렉시컬 스코프란?**  
→ **변수가 선언된 위치 기준**으로 스코프가 결정되는 방식 (정적 스코프)

✔ **자바스크립트는 렉시컬 스코프를 따름**  
→ 함수 호출 위치와 관계없이, **함수가 선언된 시점의 스코프 체인**을 따라 변수 검색

✔ **실행 결과 분석**

```js
var x = "foo";

function foo() {
  var x = "bar";
  bar();
}

function bar() {
  console.log(x);
}

foo(); // "foo"
bar(); // "foo"
```

→ `bar`는 선언된 위치(전역) 기준으로 `x`를 찾기 때문에 `"foo"`를 출력

---
